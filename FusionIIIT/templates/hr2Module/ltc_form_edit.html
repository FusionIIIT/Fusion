<div style="margin: 2rem;">
    <div class="ui vertical segment">
        <form method="post" id="ltc_form" enctype="multipart/form-data">
            {% csrf_token %}

            <div class="ui form" style="padding: 8px; padding-left: 24px; padding-right: 24px;">
                <div class="two fields">
                    <div class="eight wide field">
                        <label for="blockYear">Block Year</label>
                        <input type="number" name="blockYear" maxlength="30" id="blockYear">
                    </div>
                    <div class="eight wide field">
                        <label for="pfNo">P.F. No.</label>
                        <input type="number" name="pfNo" maxlength="30" id="pfNo">
                    </div>

                </div>    

                <div class="eight wide field" style="float: right;">
                    <label for="basicPaySalary">Basic Pay Rs.</label>
                    <input type="number" name="basicPaySalary" maxlength="20" id="basicPaySalary">
                </div>
                <br><br><br><br>
                <div class="two fields">    
                    <div class="eight wide field">
                        <label for="name">Name</label>
                        <input type="text" name="name" maxlength="40" id="name" value="{{ employee.user }}">
                    </div>
                </div>

                <div class="two fields">
                    <div class="eight wide field">
                        <label for="designation">Designation</label>
                        <input type="text" name="designation" maxlength="40" id="designation" value="{{ designation }}">
                    </div>
                </div>

                <div class="two fields">
                    <div class="eight wide field">
                        <label for="departmentInfo">Department/Section</label>
                        <input type="text" name="departmentInfo" maxlength="40" id="departmentInfo">
                    </div>
                </div>  

                <div class="two fields">
                    <div class="eight wide field">
                        <label for="leaveRequired">(a) Whether leave is required for availing L.T.C.?</label>
                        <div class="field">
                            <select class="ui dropdown" name="leaveRequired" id="leaveRequired">
                                <option value="True">Yes</option>
                                <option value="False">No</option>
                            </select>
                        </div>
                    </div>
                </div>
                

                <div class="two fields">
                    <div class="eight wide field">
                        <label for="leave_dates">(b) (i) If so, duration of leave applied for From</label>
                        <input type="date" name="leaveStartDate">
                        <label for="leave_dates">To:</label>
                        <input type="date" name="leaveEndDate">
                    </div>
                    <div class="eight wide field">
                        <label for="dateOfDepartureForFamily">(ii) Date of departure of family, if not availing himself</label>
                        <input type="date" name="dateOfDepartureForFamily">
                    </div>
                </div>  

                <div class="two fields">
                    <div class="eight wide field">
                        <label for="natureOfLeave">(c) Nature of leave</label>
                        <input type="text" name="natureOfLeave" maxlength="40" id="natureOfLeave">
                    </div>
                </div>

                <div class="two fields">
                    <div class="eight wide field">
                        <label for="purposeOfLeave">(d) Purpose</label>
                        <input type="text" name="purposeOfLeave" maxlength="40" id="purposeOfLeave">
                    </div>
                </div>

                <div class="two fields">
                    <div class="eight wide field">
                        <label for="hometownOrNot">Whether L.T.C. is desired for going to home town or elsewhere?</label>
                        <div class="two fields">
                            <div class="eight wide field">
                                <label for="hometownOrNot">Select Place:</label>
                                <div class="field">
                                    <select class="ui dropdown" name="hometownOrNot" id="hometownOrNot">
                                        <option value="True">Home Town</option>
                                        <option value="False">Elsewhere</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="ten wide field">
                            <label for="placeOfVisit">
                                <input type="text" name="placeOfVisit" maxlength="40" id="placeOfVisit" placeholder="Place where you are visiting">
                            </label>    
                        </div>
                    </div>
                </div>  

                <div class="twenty wide field">
                    <label for="addressDuringLeave">Address during leave</label>
                    <input type="text" name="addressDuringLeave" maxlength="80" id="addressDuringLeave">
                </div>
            
                
                <div class="eight wide field">
                    <label for="modeofTravel">Mode: </label>  
                    <div class="two fields" style="justify-content: space-around;">
                        <select class="ui dropdown" name="modeofTravel" id="modeofTravel">
                            <option value="True">rail</option>
                            <option value="False">road</option>
                        </select>
                        
                    </div>
                </div>

                <div class="twenty wide field">
                    <label for="detailsOfFamilyMembersAlreadyDone">(i) Details of family members for whom L.T.C. for this block has already been availed:</label>
                    <div class="three fields">
                        <div class="eight wide field">
                            <label for="family_mem_a">a</label>
                            <input type="text" name="detailsOfFamilyMembersAlreadyDone" maxlength="40" id="id_family_mem_a">
                        </div>
                        <div class="eight wide field">
                            <label for="family_mem_b">b</label>
                            <input type="text" name="detailsOfFamilyMembersAlreadyDone" maxlength="40" id="id_family_mem_b">
                        </div>
                        <div class="eight wide field">
                            <label for="family_mem_c">c</label>
                            <input type="text" name="detailsOfFamilyMembersAlreadyDone" maxlength="40" id="id_family_mem_c">
                        </div>
                    </div>
                </div>

                <div class="eight wide field">
                    <label for="detailsOfFamilyMembersAboutToAvail">(ii) Details of family members who will avail L.T.C. <br> &nbsp; &nbsp; &nbsp; &nbsp; (a) Self &nbsp; (b) Spouse &nbsp;(c) Children</label>
                </div>
                
                <div>
                    <table style="border: 1px solid black">
                        <tr>
                            <th>S.No</th>
                            <th>Full Name</th>
                            <th>Age</th>
                        </tr>
                        <tr>
                            <td><input type="number" name="info_1_1" maxlength="40" id="id_info_1_1"></td>
                            <td><input type="text" name="info_1_2" maxlength="40" id="id_info_1_2"></td>
                            <td><input type="number" name="info_1_3" maxlength="40" id="id_info_1_3"></td>
                        </tr>
                        <tr>
                            <td><input type="number" name="info_2_1" maxlength="40" id="id_info_2_1"></td>
                            <td><input type="text" name="info_2_2" maxlength="40" id="id_info_2_2"></td>
                            <td><input type="number" name="info_2_3" maxlength="40" id="id_info_2_3"></td>
                        </tr>
                        <tr>
                            <td><input type="number" name="info_3_1" maxlength="40" id="id_info_3_1"></td>
                            <td><input type="text" name="info_3_2" maxlength="40" id="id_info_3_2"></td>
                            <td><input type="number" name="info_3_3" maxlength="40" id="id_info_3_3"></td>
                        </tr>
                        <tr>
                            <td><input type="number" name="info_4_1" maxlength="40" id="id_info_4_1"></td>
                            <td><input type="text" name="info_4_2" maxlength="40" id="id_info_4_2"></td>
                            <td><input type="number" name="info_4_3" maxlength="40" id="id_info_4_3"></td>
                        </tr>
                        <tr>
                            <td><input type="number" name="info_5_1" maxlength="40" id="id_info_5_1"></td>
                            <td><input type="text" name="info_5_2" maxlength="40" id="id_info_5_2"></td>
                            <td><input type="number" name="info_5_3" maxlength="40" id="id_info_5_3"></td>
                        </tr>
                        <tr>
                            <td><input type="number" name="info_6_1" maxlength="40" id="id_info_6_1"></td>
                            <td><input type="text" name="info_6_2" maxlength="40" id="id_info_6_2"></td>
                            <td><input type="number" name="info_6_3" maxlength="40" id="id_info_6_3"></td>
                        </tr>
                    </table>
                    
                </div>
                <br>
                <div class="ten wide field">
                    <label for="detailsOfDependents">(d)Dependent parents, minor brothers, and sisters residing with the applicant: </label>
                </div>
                <div>
                    <table style="border: 1px solid black">
                        <tr>
                            <th>S.No</th>
                            <th>Full Name</th>
                            <th>Age</th>
                            <th>Why fully dependent?</th>
                        </tr>
                        <tr>
                            <td><input type="number" name="d_info_1_1" maxlength="40" id="id_d_info_1_1"></td>
                            <td><input type="text" name="d_info_1_2" maxlength="40" id="id_d_info_1_2"></td>
                            <td><input type="number" name="d_info_1_3" maxlength="40" id="id_d_info_1_3"></td>
                            <td><input type="text" name="d_info_1_4" maxlength="40" id="id_d_info_1_4"></td>
                        </tr>
                        <tr>
                            <td><input type="number" name="d_info_2_1" maxlength="40" id="id_d_info_2_1"></td>
                            <td><input type="text" name="d_info_2_2" maxlength="40" id="id_d_info_2_2"></td>
                            <td><input type="number" name="d_info_2_3" maxlength="40" id="id_d_info_2_3"></td>
                            <td><input type="text" name="d_info_2_4" maxlength="40" id="id_d_info_2_4"></td>
                        </tr>
                        <tr>
                            <td><input type="number" name="d_info_3_1" maxlength="40" id="id_d_info_3_1"></td>
                            <td><input type="text" name="d_info_3_2" maxlength="40" id="id_d_info_3_2"></td>
                            <td><input type="number" name="d_info_3_3" maxlength="40" id="id_d_info_3_3"></td>
                            <td><input type="text" name="d_info_3_4" maxlength="40" id="id_d_info_3_4"></td>
                        </tr>
                        <tr>
                            <td><input type="number" name="d_info_4_1" maxlength="40" id="id_d_info_4_1"></td>
                            <td><input type="text" name="d_info_4_2" maxlength="40" id="id_d_info_4_2"></td>
                            <td><input type="number" name="d_info_4_3" maxlength="40" id="id_d_info_4_3"></td>
                            <td><input type="text" name="d_info_4_4" maxlength="40" id="id_d_info_4_4"></td>
                        </tr>
                        <tr>
                            <td><input type="number" name="d_info_5_1" maxlength="40" id="id_d_info_5_1"></td>
                            <td><input type="text" name="d_info_5_2" maxlength="40" id="id_d_info_5_2"></td>
                            <td><input type="number" name="d_info_5_3" maxlength="40" id="id_d_info_5_3"></td>
                            <td><input type="text" name="d_info_5_4" maxlength="40" id="id_d_info_5_4"></td>
                        </tr>
                        <tr>
                            <td><input type="number" name="d_info_6_1" maxlength="40" id="id_d_info_6_1"></td>
                            <td><input type="text" name="d_info_6_2" maxlength="40" id="id_d_info_6_2"></td>
                            <td><input type="number" name="d_info_6_3" maxlength="40" id="id_d_info_6_3"></td>
                            <td><input type="text" name="d_info_6_4" maxlength="40" id="id_d_info_6_4"></td>
                        </tr>
                    </table>
                    
                </div>

                <div class="eight wide field">
                    <label for="amountOfAdvanceRequired">Amount of advance required, if any:</label>
                    <input type="number" name="amountOfAdvanceRequired" maxlength="10" id="amountOfAdvanceRequired">
                </div>
                <div class="two fields">
                <div class="eight wide field">
                    <label for="certifiedThatFamilyDependents">(i) Certified that family members for whom the L.T.C. is claimed are residing with me and are wholly dependent upon me. </label>
                    <input type="text" name="certifiedThatFamilyDependents" maxlength="40" id="certifiedThatFamilyDependents">
                </div>
                
                <div class="eight wide field">
                    <label for="certifiedThatAdvanceTakenOn">(ii) Certified that the previous L.T.C. advance drawn by me on </label>
                    <input type="date" name="certifiedThatAdvanceTakenOn" maxlength="40" id="certifiedThatAdvanceTakenOn">
                    <label for="adjustedMonth">has been adjusted in the month of  </label>
                    <input type="text" name="adjustedMonth" maxlength="40" id="adjustedMonth">

                </div>
                </div>

                <div class="eight wide field">
                    <label for="submissionDate">Date</label>
                    <input type="date" name="submissionDate" id="submissionDate">
                </div>

                <div class="two fields">
                    <div class="eight wide field">
                        <label for="phoneNumberForContact">Phone Number for contact</label>
                        <input type="number" name="phoneNumberForContact" maxlength="40" id="phoneNumberForContact" value="{{ employee.phone_no }}">
                    </div>
                </div>


                <div class="two fields">
                    <div class="eight wide field">
                        <label for="username_employee">Username:</label>
                        <input type="text" name="username_employee" id="username_employee" class="ui search" placeholder="Enter Username">
                    </div>
                    <div class="eight wide field">
                        <label for="designation_employee">Designation:</label>
                        <input type="text" name="designation_employee" id="designation_employee" value = "{{designation}}">
                    </div>
                    <div class="field">
                        <button id="check_button" class="ui primary button right floated">Check</button>
                    </div>
                </div>

                

                <div class="field">
                    <button class="ui primary button right floated" type="submit" value="Submit">
                        Submit
                    </button>
                </div>

                
            </div>
        </form>




        <br>
        <br>


    </div>
    <br>
    <div class="extra content"></div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        $('#check_button').click(function(event) {
            event.preventDefault();
            var selectedUsername = $('#username_employee').val();

            // Fire query to the URL with selected username
            $.ajax({
                url: '/hr2/search_employee/',
                type: 'GET',
                data: { search: selectedUsername }, // Pass search text as query parameter
                success: function(data) {
                    if (data.designation) {
                        // Employee exists, update designation
                        $('#designation_employee').val(data.designation);
                        alert("Employee exists");
                    } else {
                        // Employee doesn't exist, show error message
                        alert("Employee doesn't exist");
                    }
                },
                error: function(xhr, status, error) {
                    console.error(error);
                    // Show error message
                    alert("An error occurred while processing your request.");
                }
            });
        });
    });
</script>