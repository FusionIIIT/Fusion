{#{% extends 'globals/base.html'%}#}
{% load static %}
{#{% block body %}#}
{% block Deregistration %}
    {% comment %}The tab menu starts here!{% endcomment %}

    <div class="ui pointing secondary menu">
        <a class="active item" data-tab="apply_registration">
            Deregistration Request
        </a>
        <a class="item" data-tab="reg_req_status">
            Request status
        </a>
    </div>
    <div class="ui active tab" data-tab="apply_registration">
        <div class="ui vertical strip segment">
            {% comment %}Form Tag starts here!{% endcomment %}
                <div>Click on Button Below to request for deregistration</div>
                <div>if your request is pending view the status of request in status bar</div>
            {% comment %}Form Tag ends here!{% endcomment %}
        </div>

        <button class="ui red button" onclick="deRegisterMess()">Deregister from mess</button>
        
    </div>

    <div class="ui tab" data-tab="reg_req_status">
        <div class="ui vertical strip segment">
    
                <table class="ui single line table" style="margin: auto;">
                  <thead>
                    <tr>
                      <th>Student Id</th>
                      <th>Remark</th>
                      <th>status</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                {% for var in de_reg_request %}
                    <tr>
                        <td>
                            {{var.student_id}}
                        </td>
                        <td>
                            {{var.deregistration_remark}}
                        </td>
                        <td>
                            {{var.status}}
                        </td>
                    </tr>
   
            {% endfor %}
        </tbody>
        </table>

    </tbody>
</table>
</div>

</div>
<script>

function deRegisterMess(){
   
            $.ajax({
                   type: 'POST',
                   url: 'deregistrationRequest',
                   dataType: 'json',
                   data: {
                       'csrfmiddlewaretoken' : '{{ csrf_token }}',
                   },
                   success: function(data) {

                           alert(data.message);
                           location.reload()
   
   
                   },
                   error: function(data, err) {
                       alert(err.message);
                   }
               });
   
            }
</script>

{% endblock %}





