{% extends 'globals/base.html' %}
{% load static %}


{% block title %}
    Profile
{% endblock %}

{% block css %}

 <link href="https://cdn.rawgit.com/mdehoog/Semantic-UI/6e6d051d47b598ebab05857545f242caf2b4b48c/dist/semantic.min.css" rel="stylesheet" type="text/css" />

{% endblock %}

{% block body %}
    {% block navBar %}
        {% include 'dashboard/navbar.html' %}
    {% endblock %}


    {% comment %}The grid starts here!{% endcomment %}
    <div class="ui stackable doubling grid">

        {% comment %}The left-margin segment!{% endcomment %}
        <div class="column"></div>

        {% comment %}
            The left-rail segment starts here!
        {% endcomment %}
        <div class="three wide column">

            {% comment %}The user image card starts here!{% endcomment %}
            {% block usercard %}
                {% include 'globals/usercard.html' %}
            {% endblock %}
            {% comment %}The user image card ends here!{% endcomment %}

            <div class="ui divider"></div>

            {% comment %}The Tab-Menu starts here!{% endcomment %}
            <div class="ui huge fluid vertical pointing menu"
                 style="max-width: 320px;">

                <a class=" {% if mark != 1 and mark2 != 1 and mark3 != 1 and mark4 != 1 and mark10 != 1 and mark11 != 1 and mark12 != 1 and mark13 != 1 %}active item {% else %}item{% endif %}" data-tab="first">
                    Personal Details
                    <i class="right floated chevron right icon"></i>
                </a>

                <a class="{% if mark == 1 or mark2 == 1 or mark3 == 1 %}active item {% else %}item{% endif %} " data-tab="second">
                    Publications
                    <i class="right floated chevron right icon"></i>
                </a>

                <a class="item" data-tab="third">
                    Projects
                    <i class="right floated chevron right icon"></i>
                </a>

                <a class="{% if mark4 == 1 %}active item {% else %}item{% endif %}" data-tab="fourth">
                    Thesis Supervision
                    <i class="right floated chevron right icon"></i>
                </a>

                <a class="{% if mark12 == 1 %}active item {% else %}item{% endif %}" data-tab="fifth">
                    Event Organised
                    <i class="right floated chevron right icon"></i>
                </a>

                <a class="{% if mark10 == 1 or mark11 == 1 %}active item {% else %}item{% endif %}" data-tab="sixth">
                    Visits
                    <i class="right floated chevron right icon"></i>
                </a>
                <a class="{% if mark13 == 1 %}active item {% else %}item{% endif %}" data-tab="seventh">
                    Conference/Symposium
                    <i class="right floated chevron right icon"></i>
                </a>

                <a class="item" data-tab="eigth">
                    Others
                    <i class="right floated chevron right icon"></i>
                </a>

                <!-- <a class="item" data-tab="ninth">
                    Administrative Responsibilities
                    <i class="right floated chevron right icon"></i>
                </a> -->
                 {% if request.user.extrainfo.user_type == "faculty" and request.user == user %}
                     <a class="item" data-tab="ninth">
                        Project Management Forms
                        <i class="right floated chevron right icon"></i>
                    </a>
                {% endif %}

                 {% if "HOD" in desig and request.user == user %}
                 <a class="item" data-tab="ten">
                    HOD_TAB
                    <i class="right floated chevron right icon"></i>
                </a>
                {% endif %}

            </div>
            {% comment %}The Tab-Menu ends here!{% endcomment %}

        </div>
        {% comment %}
            The left-rail segment ends here!
        {% endcomment %}



        {% comment %}
            The central-rail segment starts here!
        {% endcomment %}
        <div class="eight wide column">
            {% comment %}The Details start here!{% endcomment %}
            <div class="{% if mark != 1 and mark2 != 1 and mark3 != 1 and mark4 != 1 and mark10 != 1 and mark11 != 1 and mark12 != 1 and mark13 != 1 %}ui active tab segment{% else %}ui tab segment{% endif %}" data-tab="first">
                {% block personaldetails %}
                    {% include 'eisModulenew/personaldetails.html' %}
                {% endblock %}
            </div>
            {% comment %}The Personal Details end here!{% endcomment %}


            {% comment %}The Publications starts here!{% endcomment %}

            <div class="{% if mark == 1 or mark2 == 1 or mark3 == 1  %}ui active tab segment{% else %}ui tab segment{% endif %}" data-tab="second">
                {% block publications %}
                    {% include 'eisModulenew/publications.html' %}
                {% endblock %}
            </div>

            {% comment %}The Publications ends here!{% endcomment %}


            {% comment %}The Projects starts here!{% endcomment %}

            <div class="ui tab segment" data-tab="third">
                <h1>Work in Progress</h1>
               <!--  {% block projects %}
                    {% include 'eisModulenew/projects.html' %}
                {% endblock %} -->
            </div>

            {% comment %}The Projects ends here!{% endcomment %}


            {% comment %}The Thesis Supervision starts here!{% endcomment %}

            <div class="{% if mark4 == 1  %}ui active tab segment{% else %}ui tab segment{% endif %}" data-tab="fourth">
                {% block thesis %}
                    {% include 'eisModulenew/thesis.html' %}
                {% endblock %}
            </div>

            {% comment %}The thesis ends here!{% endcomment %}

            {% comment %}The events organised starts here!{% endcomment %}

            <div class="{% if mark12 == 1  %}ui active tab segment{% else %}ui tab segment{% endif %}" data-tab="fifth">
                {% block eventorganised %}
                    {% include 'eisModulenew/eventorganized.html' %}
                {% endblock %}
            </div>

            {% comment %}The event organised ends here!{% endcomment %}

            {% comment %}The visits starts here!{% endcomment %}

            <div class="{% if mark10 == 1 or mark11 == 1 %}ui active tab segment{% else %}ui tab segment{% endif %}" data-tab="sixth">
                {% block visits %}
                    {% include 'eisModulenew/visits.html' %}
                {% endblock %}
            </div>
            {% comment %}The visits ends here!{% endcomment %}

            {% comment %}The conference starts here!{% endcomment %}
            <div class="{% if mark13 == 1  %}ui active tab segment{% else %}ui tab segment{% endif %}" data-tab="seventh">
                {% block conference %}
                    {% include 'eisModulenew/conference.html' %}
                {% endblock %}
            </div>
            {% comment %}The conference ends here!{% endcomment %}

            {% comment %}The others starts here!{% endcomment %}
            <div class="ui tab segment" data-tab="eigth">
                {% block others %}
                    {% include 'eisModulenew/others.html' %}
                {% endblock %}
            </div>
            {% comment %}The others ends here!{% endcomment %}

            {% comment %}The Thesis Supervision starts here!{% endcomment %}
            <div class="ui tab segment" data-tab="ninth">
                {% block form1 %}
                    {% include 'officeModule/officeOfDeanRSPC/tab1.html' %}
                {% endblock %}
            </div>


            <div class="ui tab segment" data-tab="ten">
                <!-- <div class="ui active tab segment" data-tab="first"> -->
                {% block form2 %}
                    {% include 'officeModule/officeOfDeanRSPC/Hod_Applications_content.html' %}
                {% endblock %}
                <!-- </div> -->
            </div>

            {% comment %}The Publications ends here!{% endcomment %}

        </div>
        {% comment %}The central-rail segment ends here!{% endcomment %}

        {% comment %}The right-rail segment starts here!{% endcomment %}
        <div class="three wide column">
            <div class="row">
                {% comment %}The Modules:{% endcomment %}
                {% block generatereport %}
                    {% include 'eisModulenew/generatereport.html' %}
                {% endblock %}
            </div>

            <div class="row">
                {% comment %}The Modules:{% endcomment %}
                {% block modules %}
                    {% include 'dashboard/modules.html' %}
                {% endblock %}
            </div>

        </div>
        {% comment %}The right-rail segment ends here!{% endcomment %}

        {% comment %}The right-margin segment!{% endcomment %}
        <div class="column"></div>

    </div>
    {% comment %}The grid ends here!{% endcomment %}



{% endblock %}







{% block javascript %}
{% csrf_token %}
    <script type="text/javascript">
        var csrftoken = jQuery("[name=csrfmiddlewaretoken]").val();
        </script>

        <script type="text/javascript">

        function csrfSafeMethod(method) {
            return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
        }
        $.ajaxSetup({
            beforeSend: function(xhr, settings) {
                if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                    xhr.setRequestHeader("X-CSRFToken", csrftoken);
                }
            }
        });
        function viewpaper(index,name,author2,co_author2,tittle2,year2,
            volume_no2,page_no2,ref2,dos2,dop2,status2,choose2,doi2)
        {
            $("#name2").text(name);
            $("#authors2").text(author2);
            $("#co_authors2").text(co_author2);
            $("#tittle2").text(tittle2);
            $("#year2").text(year2);
            $("#volume_no2").text(volume_no2);
            $("#page_no2").text(page_no2);
            $("#ref2").text(ref2);
            $("#dos2").text(dos2);
            $("#dop2").text(dop2);
            $("#status2").text(status2);
            $("#choose2").text(choose2);
            $("#doi2").text(doi2);
            $("#papermodal").modal('show');
        }


        function editpaper(index,id,name,author2,co_author2,tittle2,year2,volume_no2,page_no2,ref2,dos2,dop2,status2,choose2,doi2)
        {

            $("#name").val(name);
            $("#authors").val(author2);
            $("#co_author").val(co_author2);
            $("#title").val(tittle2);
            $("#year").val(year2);
            $("#volume").val(volume_no2);
            $("#page").val(page_no2);
            $("#ref").val(ref2);
            $("#dos").val(dos2);
            $("#dop").val(dop2);
            $("#status").val(status2);
            $("#sci").val(choose2);
            $("#doi").val(doi2);
            $("#journalpk").val(id);
            $("#index").val(index);
            document.getElementById("savejournal").style.display='none';
            document.getElementById("editjournal").style.display='block';
            document.getElementById("journalform").action="{% url 'eis:editjournal' %}";
            
        }

        function editforeignvisit(index,id,country,place,purpose,start_date,end_date)
        {

            $("#country").val(country);
            $("#place").val(place);
            $("#purpose").val(purpose);
            $("#start_date").val(start_date);
            $("#end_date").val(end_date);
            $("#foreignvisitpk").val(id);
            $("#index10").val(index);
            document.getElementById("saveforeignvisit").style.display='none';
            document.getElementById("editforeignvisit").style.display='block';
            document.getElementById("foreignvisitform").action="{% url 'eis:editforeignvisit' %}";
            
        }

        function editindianvisit(index,id,country,place,purpose,start_date,end_date)
        {

            $("#country2").val(country);
            $("#place2").val(place);
            $("#purpose2").val(purpose);
            $("#start_date2").val(start_date);
            $("#end_date2").val(end_date);
            $("#indianvisitpk").val(id);
            $("#index11").val(index);
            document.getElementById("saveindianvisit").style.display='none';
            document.getElementById("editindianvisit").style.display='block';
            document.getElementById("indianvisitform").action="{% url 'eis:editindianvisit' %}";
            
        }

        function editevent(index,id,role,agency,venue,start_date,end_date, type, name)
        {

            $("#event_role").val(role);
            $("#sponsoring_agency").val(agency);
            $("#event_venue").val(venue);
            $("#event_start_date").val(start_date);
            $("#event_end_date").val(end_date);
            $("#event_type").val(type);

            $("#event_name").val(name);
            $("#eventpk").val(id);
            $("#index12").val(index);
            document.getElementById("saveevent").style.display='none';
            document.getElementById("editevent").style.display='block';
            document.getElementById("eventsform").action="{% url 'eis:editevent' %}";
            
        }

        function editconference2(index,id,role1,role2,name,venue,start_date,end_date)
        {

            $("#conference_role").val(role1);
            if (role2 != 'None' ){
                $("#conference_organised").val(role2);
            }
            $("#conference_name").val(name);
            $("#conference_venue").val(venue);
            $("#conference_start_date").val(start_date);
            $("#conference_end_date").val(end_date);
            $("#conferencepk2").val(id);
            $("#index13").val(index);
            document.getElementById("saveconference2").style.display='none';
            document.getElementById("editconference2").style.display='block';
            document.getElementById("conferenceform2").action="{% url 'eis:editconsym' %}";
            
        }

        function viewconference(c_name,c_author,c_co_author,c_tittle,c_year,c_venue,c_dos,c_doa,c_dop,c_page,c_status,c_isbn)
        {
            
            $("#conf_name").text(c_name);
            $("#conf_authors").text(c_author);
            $("#conf_co_authors").text(c_co_author);
            $("#conf_tittle").text(c_tittle);
            $("#conf_year").text(c_year);
            $("#conf_venue").text(c_venue);
            $("#conf_dos").text(c_dos);
            $("#conf_doa").text(c_doa);
            $("#conf_dop").text(c_dop);
            $("#conf_page").text(c_page);
            $("#conf_status").text(c_status);
            $("#conf_isbn").text(c_isbn);
            $("#conferencemodal").modal('show');
        }


        function editconference(pk,index,c_name,c_author,c_co_author,c_tittle,c_year,c_venue,c_dos,c_doa,c_dop,c_page,c_status,c_isbn)
        {
            console.log("dvd")
            $("#index3").val(index);
            $("#conferencepk").val(pk);
            $("#name3").val(c_name);
            $("#authors3").val(c_author);
            $("#co_author3").val(c_co_author);
            $("#title3").val(c_tittle);
            $("#year3").val(c_year);
            $("#venue3").val(c_venue);
            $("#dos3").val(c_dos);
            $("#doa3").val(c_doa);
            $("#dop3").val(c_dop);
            $("#page_no3").val(c_page);
            $("#status3").val(c_status);
            $("#isbn_no3").val(c_isbn);
            document.getElementById("saveconference").style.display='none';
            document.getElementById("editconference").style.display='block';
            document.getElementById("conferenceform").action="{% url 'eis:editconference' %}";
        }



        function editFirst(){
            var aboutSpan = $("#aboutSpan").text().trim();
            var educationSpan = $("#educationSpan").text().trim();
            var interestSpan = $("#interestSpan").text().trim();
            var contactSpan = $("#contactSpan").text().trim();
            var buttonValue = $("#editButton").val();
            var linkedinSpan = $("#linkedinSpan").text().trim();
            var githubSpan = $("#githubSpan").text().trim();
            console.log(buttonValue);
            if(buttonValue == "Edit"){
                console.log("2")
                $("#editButton").val("Save");
                console.log($("#contactInput").val(contactSpan));
                $("#contactInput").val(contactSpan);
                $("#contactInput").show();
                $("#contactSpan").hide();
                $("#contactIcon").hide();  

                console.log($("#githubInput").val(githubSpan));
                $("#githubInput").val(githubSpan);
                $("#githubInput").show();
                $("#githubSpan").hide();
                $("#githubIcon").hide();


                console.log($("#linkedinInput").val(linkedinSpan));
                $("#linkedinInput").val(linkedinSpan);
                $("#linkedinInput").show();
                $("#linkedinSpan").hide();
                $("#linkedinIcon").hide();
                 
                $("#aboutTextarea").val(aboutSpan);
                $("#aboutTextarea").show();
                $("#aboutSpan").hide();

                $("#educationTextarea").val(educationSpan);
                $("#educationTextarea").show();
                $("#educationSpan").hide();

                $("#interestTextarea").val(interestSpan);
                $("#interestTextarea").show();
                $("#interestSpan").hide();

            }
            else if(buttonValue == "Save"){
                $.ajax({
                    url : '{% url "eis:persinfo" %}',
                    type : "POST",
                    data: {
                    'contact': $("#contactInput").val().trim(),
                    'about': $("#aboutTextarea").val().trim(),
                    'education':$("#educationTextarea").val().trim(),
                    'interest' : $("#interestTextarea").val().trim() ,
                    'linkedin' : $("#linkedinInput").val().trim(),
                    'github' : $("#githubInput").val().trim(),
                    'csrfmiddlewaretoken': '{{csrf_token}}',
                  },
                  success: function(returned, status, xhr){
                    alert(returned['x']);
                  },
                    error: function(rs, e){
                    console.log('error');
                }
                });
                console.log("recieving");

                $("#editButton").val("Edit");


                console.log('after save')

                var contactValue = $("#contactInput").val().trim();
                $("#contactSpan").text(contactValue);
                $("#contactInput").hide();
                $("#contactSpan").show();
                $("#contactIcon").show();

                var aboutSpan = $("#aboutTextarea").val().trim();
                $("#aboutSpan").text(aboutSpan);
                $("#aboutTextarea").hide();
                $("#aboutSpan").show();

                var educationSpan = $("#educationTextarea").val().trim();
                $("#educationSpan").text(educationSpan);
                $("#educationTextarea").hide();
                $("#educationSpan").show();

                var interestSpan = $("#interestTextarea").val().trim();
                $("#interestSpan").text(interestSpan);
                $("#interestTextarea").hide();
                $("#interestSpan").show();

                var linkedinValue = $("#linkedinInput").val().trim();
                $("#linkedinSpan").text(linkedinValue);
                $("#linkedinInput").hide();
                $("#linkedinSpan").show();
                $("#linkedinIcon").show();

                var githubValue = $("#githubInput").val().trim();
                $("#githubSpan").text(githubValue);
                $("#githubInput").hide();
                $("#githubSpan").show();
                $("#githubIcon").show();

            }

        }

    </script>

    <script type="text/javascript" src="{% static 'fusion/js/editProfile.js' %}"></script>
    <script type="text/javascript" src="{% static 'fusion/js/modal.js' %}"></script>
    <script type="text/javascript" src="{% static 'fusion/js/tablesort.js' %}"></script>
    <script type="text/javascript" src="{% static 'fusion/js/jquery.min.js' %}"></script>

    <!-- <script src="https://code.jquery.com/jquery-2.1.4.js"></script> -->
    <script src="https://cdn.rawgit.com/mdehoog/Semantic-UI/6e6d051d47b598ebab05857545f242caf2b4b48c/dist/semantic.min.js"></script>

    {% comment %}
        <script>
            $(document).ready(function() {
                $('table').tablesort();
            });
        </script>
            {% endcomment %}
        <script>

        </script>


        <script>
            function toggleContent() {
                $('.modulesContent').toggle();

                if($('.modulesContent').is(':visible')){
                    $('#toggleIcon').removeClass("chevron down");
                    $('#toggleIcon').addClass("chevron up");
                }
                else if(!$('.modulesContent').is(':visible')){
                    $('#toggleIcon').removeClass("chevron up");
                    $('#toggleIcon').addClass("chevron down");
                }
            }



            $('#example1').calendar();
            $('#example1a').calendar();
            $('#example1b').calendar();
            $('#example1d').calendar();
            $('#example1e').calendar();
            $('#example1f').calendar();
            $('#example1g').calendar();
             $('#example1h').calendar();

            $('#example2').calendar({
              type: 'date'
            });

            $('#example3').calendar({
              type: 'time'
            });

            $('#rangestart').calendar({
              type: 'date',
              endCalendar: $('#rangeend')
            });

            $('#rangeend').calendar({
              type: 'date',
              startCalendar: $('#rangestart')
            });

             $('#rangestart1').calendar({
              type: 'date',
              endCalendar: $('#rangeend')
            });

            $('#rangeend1').calendar({
              type: 'date',
              startCalendar: $('#rangestart')
            });
             $('#rangestart2').calendar({
              type: 'date',
              endCalendar: $('#rangeend')
            });

            $('#rangeend2').calendar({
              type: 'date',
              startCalendar: $('#rangestart')
            });

             $('#rangestart3').calendar({
              type: 'date',
              endCalendar: $('#rangeend')
            });

            $('#rangeend3').calendar({
              type: 'date',
              startCalendar: $('#rangestart')
            });

              $('#rangestart4').calendar({
              type: 'date',
              endCalendar: $('#rangeend')
            });

            $('#rangeend4').calendar({
              type: 'date',
              startCalendar: $('#rangestart')
            });

              $('#rangestart5').calendar({
              type: 'date',
              endCalendar: $('#rangeend')
            });

            $('#rangeend5').calendar({
              type: 'date',
              startCalendar: $('#rangestart')
            });

             $('#rangestart6').calendar({
              type: 'date',
              endCalendar: $('#rangeend')
            });

            $('#rangeend6').calendar({
              type: 'date',
              startCalendar: $('#rangestart')
            });

            $('#example4').calendar({
              startMode: 'year'
            });

            $('#example5').calendar();

            $('#example6').calendar({
              ampm: false,
              type: 'time'
            });

            $('#example7').calendar({
              type: 'month'
            });

            $('#example8').calendar({
              type: 'year'
            });

            $('#example9').calendar();
            $('#example10').calendar({
              on: 'hover'
            });

            var today = new Date();
            $('#example11').calendar({
              minDate: new Date(today.getFullYear(), today.getMonth(), today.getDate() - 5),
              maxDate: new Date(today.getFullYear(), today.getMonth(), today.getDate() + 5)
            });

            $('#example12').calendar({
              monthFirst: false
            });

            $('#example13').calendar({
              monthFirst: false,
              formatter: {
                date: function (date, settings) {
                  if (!date) return '';
                  var day = date.getDate();
                  var month = date.getMonth() + 1;
                  var year = date.getFullYear();
                  return day + '/' + month + '/' + year;
                }
              }
            });
            $('#example14').calendar({
              inline: true
            });
            $('#example15').calendar();



                  function myFunction() {
                var x = document.getElementById("myDIV");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
               }

                   function myFunction1() {
                var x = document.getElementById("myDIV");
                if (x.style.display === "block") {
                    x.style.display = "none";
                } else {
                    x.style.display = "none";
                }
               }


               function myFunction2() {
                var x = document.getElementById("myDIV1");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
               }

                   function myFunction3() {
                var x = document.getElementById("myDIV1");
                if (x.style.display === "block") {
                    x.style.display = "none";
                } else {
                    x.style.display = "none";
                }
               }

                  function myFunction4() {
                var x = document.getElementById("myDIV2");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
               }

                   function myFunction5() {
                var x = document.getElementById("myDIV2");
                if (x.style.display === "block") {
                    x.style.display = "none";
                } else {
                    x.style.display = "none";
                }
               }
        </script>
        <script type="text/javascript" src="{% static 'fusion/js/datepicker.js' %}"></script>
{% endblock %}
